# Python 和 Vue 常用命令说明

本文件汇总了项目开发中常用的 Python 和 Vue 命令，方便开发人员快速参考。

## Python 相关命令

### 不挂断命令启动服务器：
```bash
# Waitress命令格式启动服务器：
nohup waitress-serve --call --host=127.0.0.1 --port=5000 app:create_app &

#认服务是否在运行
ps aux | grep waitress

# 查看最新日志
tail -f nohup.out

# 查看完整日志
cat nohup.out

# 终止运行中的服务  将 <PID> 替换为实际进程 ID
kill -9 <PID>


```

### 虚拟环境管理
```bash
# 创建虚拟环境
python -m venv .venv

# 激活虚拟环境 (Windows)
.venv\Scripts\activate

# 激活虚拟环境 (macOS/Linux)
source .venv/bin/activate

# 退出虚拟环境
deactivate
```

### 包管理 (pip)
```bash
# 安装依赖包
pip install package_name

# 安装指定版本的包
pip install package_name==version

# 安装 requirements.txt 中的所有依赖
pip install -r requirements.txt

# 更新包
pip install --upgrade package_name

# 卸载包
pip uninstall package_name

# 列出已安装的包
pip list

# 导出当前环境的依赖到 requirements.txt
pip freeze > requirements.txt
```

### 运行 Python 脚本
```bash
# 运行单个 Python 文件
python script.py

# 运行带参数的 Python 脚本
python script.py --arg1 value1 --arg2 value2

# 以模块方式运行 (如 Flask/Django)
python -m module_name
```

### Flask 相关命令
```bash
# 运行 Flask 应用 (开发模式)
flask run

# 指定端口运行
flask run --port=5000

# 启用调试模式
flask run --debug

# 数据库迁移相关
# 1. 初始化迁移环境（如果之前用 SQLite 初始化过，需先删除 migrations 目录）
flask db init

# 2. 生成迁移文件（自动对比模型与数据库结构）
flask db migrate -m "切换到 MySQL 初始化结构"

# 3. 应用迁移（在 MySQL 中创建表）
flask db upgrade

# 4. 回滚迁移
flask db downgrade
```

## Vue 相关命令

### 项目创建与依赖管理
```bash
# 使用 npm 创建 Vue 项目
npm create vue@latest

# 使用 yarn 创建 Vue 项目
yarn create vue

# 安装项目依赖
npm install

# 安装指定依赖包
npm install package_name

# 安装开发环境依赖
npm install --save-dev package_name

# 卸载依赖
npm uninstall package_name
```

### 开发与构建
```bash
# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 预览构建后的应用
npm run preview

# 检查代码格式
npm run lint

# 自动修复代码格式问题
npm run lint -- --fix
```

### Vite 相关命令
```bash
# 启动 Vite 开发服务器
vite

# 构建生产版本
vite build

# 预览构建后的应用
vite preview

# 指定环境模式
vite --mode development
vite build --mode production
```

## 项目特定命令

### 数据库操作
```bash
# 运行数据库迁移脚本
python run.py migrate

# 生成测试数据
python generate_test_data.py

# 删除测试记录
python delete_test_records.py

# 检查数据库表结构
python check_table.py
```

### 测试命令
```bash
# 运行 Python 单元测试
python -m unittest discover tests

# 运行特定测试文件
python -m unittest tests/test_file.py

# 运行 Vue 单元测试
npm run test:unit

# 运行 Vue E2E 测试
npm run test:e2e
```

### 其他实用命令
```bash
# 列出项目用户
python list_users.py

# 创建测试用户
python create_test_user.py

# 测试 API 接口
python test_api.py

# 启动后端服务
# 开发环境
python run.py --env development

# 测试环境
python run.py --env testing

# 生产环境
python run.py --env production

# 默认环境（通常为开发环境）
python run.py
```

## 环境变量配置
```bash
# 在开发环境中设置环境变量 (Windows)
set VITE_API_URL=http://localhost:5000

# 在开发环境中设置环境变量 (macOS/Linux)
export VITE_API_URL=http://localhost:5000
```

## 常用组合命令
```bash
# 启动后端服务和前端开发服务器 (Windows)
start python run.py && cd a-vue && npm run dev

# 启动后端服务和前端开发服务器 (macOS/Linux)
python run.py & cd a-vue && npm run dev
```

## Git 相关命令

### 仓库初始化与配置
```bash
# 初始化本地仓库
git init

# 配置用户信息
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"

# 查看配置信息
git config --list
```

### 基本操作
```bash
# 查看文件状态
git status

# 添加文件到暂存区
git add filename
git add .  # 添加所有文件

# 提交代码
git commit -m "Commit message"

# 查看提交历史
git log
git log --oneline  # 简洁显示
```

### 分支管理
```bash
# 查看分支
git branch
git branch -a  # 查看所有分支(包括远程)

# 创建分支
git branch branch_name

# 切换分支
git checkout branch_name
# 或使用新版语法
git switch branch_name

# 创建并切换分支
git checkout -b branch_name
# 或使用新版语法
git switch -c branch_name

# 合并分支
git merge branch_name  # 将branch_name合并到当前分支

# 删除分支
git branch -d branch_name  # 删除已合并的分支
git branch -D branch_name  # 强制删除未合并的分支
```

### 远程操作
```bash
# 添加远程仓库
git remote add origin https://github.com/username/repo.git

# 查看远程仓库
git remote -v

# 拉取远程代码
git pull origin branch_name

# 推送代码到远程
git push origin branch_name

# 推送本地所有分支到远程
git push --all origin

# 强制推送(谨慎使用)
git push -f origin branch_name
```

### 撤销与回滚
```bash
# 撤销工作区修改
git checkout -- filename

# 撤销暂存区修改
git reset HEAD filename
git reset HEAD .  # 撤销所有暂存区修改

# 回滚到指定提交
git reset --hard commit_id

# 查看操作记录
git reflog
```

### 标签管理
```bash
# 创建标签
git tag v1.0.0

# 查看标签
git tag

git show v1.0.0  # 查看标签详情

# 推送标签到远程
git push origin v1.0.0
git push origin --tags  # 推送所有标签

# 删除标签
git tag -d v1.0.0
git push origin --delete v1.0.0  # 删除远程标签
```